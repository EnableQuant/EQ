<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Parameter Robustness Landscape</title>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>
  body { 
    margin: 0; 
    font-family: Arial, sans-serif; 
    background-color: #0b0f14; 
    color: #fff;
  }
  #robustnessSurface { 
    width: 100%; 
    height: 100vh; 
  }
  h1 {
    text-align: center;
    padding: 20px 0;
    font-size: 2rem;
    color: #fff;
  }
  p {
    text-align: center;
    max-width: 800px;
    margin: 0 auto 30px auto;
    color: #ccc;
  }
</style>
</head>
<body>

<h1>Parameter Robustness Landscape</h1>
<p>Regions of parameter stability that persist across regime shifts and controlled perturbations. 
High stability indicates robust performance across rolling windows and entry thresholds.</p>

<div id="robustnessSurface"></div>

<script>


  const windowRange = [];
  const zEntryRange = [];
  const stabilitySurface = [];


  for (let w = 500; w <= 1500; w += 10) {
    windowRange.push(w);
  }

  for (let z = 2; z <= 3.5; z += 0.05) {
    zEntryRange.push(z);
  }


  for (let i = 0; i < windowRange.length; i++) {
    const row = [];
    for (let j = 0; j < zEntryRange.length; j++) {
      const w = windowRange[i];
      const z = zEntryRange[j];

      const windowPenalty = Math.exp(-Math.pow((w - 1000) / 200, 2));
      const zPenalty = Math.exp(-Math.pow((z - 2.5) / 0.4, 2));


      let stability =
        0.9 * windowPenalty * zPenalty +
        0.1 * Math.random(); 

      // Clamp values
      stability = Math.max(0, Math.min(1, stability));
      row.push(stability);
    }
    stabilitySurface.push(row);
  }

  Plotly.newPlot("robustnessSurface", [{
    type: "surface",
    x: windowRange,
    y: zEntryRange,
    z: stabilitySurface,
    colorscale: "Viridis",
    showscale: true,
    contours: {
      z: {
        show: true,
        usecolormap: true,
        highlightcolor: "#42f462",
        project: { z: true }
      }
    }
  }], {
    paper_bgcolor: "#0b0f14",
    plot_bgcolor: "#0b0f14",
    margin: { l: 0, r: 0, b: 0, t: 0 },
    scene: {
      xaxis: {
        title: { text: "Rolling Window Length", standoff: 20 },
        tickfont: { size: 10 }
      },
      yaxis: {
        title: { text: "Standard Score Threshold", standoff: 20 },
        tickfont: { size: 10 }
      },
      zaxis: {
        title: { text: "Stability Score", standoff: 10 },
        tickfont: { size: 10 }
      },
      camera: {
        eye: { x: 1.5, y: 1.4, z: 0.9 }
      }
    }
  });
</script>

</body>
</html>
